<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ch√∫c M·ª´ng Sinh Nh·∫≠t</title>
  <style>
    /* --- C∆° b·∫£n --- */
    :root { --accent: #ff4081; }
    *{box-sizing:border-box}
    body{
      margin:0;
      padding:0;
      background: linear-gradient(to top right,#ffecd2,#fcb69f);
      height:100vh;
      font-family: Arial, sans-serif;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    h1{
      font-size:3em;
      color:var(--accent);
      text-shadow:2px 2px #fff;
      margin:10px 0;
    }
    /* --- B√°nh kem --- */
    .cake{
      width:200px;
      cursor:pointer;
      transition:transform .25s;
      user-select:none;
    }
    .cake:hover{ transform:scale(1.05) }
    /* --- Popup l·ªùi ch√∫c --- */
    .popup{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:rgba(0,0,0,.6);
      z-index:30;
    }
    .popup-content{
      background: linear-gradient(135deg,#f6d365,#fda085);
      padding:28px;
      border-radius:18px;
      max-width:560px;
      color:white;
      text-align:center;
      box-shadow:0 10px 30px rgba(0,0,0,.3);
    }
    .popup-content h2{ margin:0 0 12px; font-size:1.6em; }
    .popup-btn{
      margin-top:14px;
      padding:10px 20px;
      border-radius:10px;
      border:none;
      cursor:pointer;
      font-size:1em;
      background:#fff; color:var(--accent);
    }
    /* --- N√∫t "B·∫•m v√†o ƒë√¢y ƒëi" n·ªïi b·∫≠t --- */
    #startBtn{
      display:none;
      margin-top:18px;
      font-size:1.9em;
      padding:14px 30px;
      border-radius:14px;
      border:none;
      cursor:pointer;
      background:linear-gradient(45deg,#ff6a88,#ffcc70);
      color:white;
      box-shadow:0 8px 30px rgba(255,105,180,.5);
      animation:pulse 1200ms infinite;
      z-index:10;
    }
    #startBtn:hover{ transform:scale(1.05); box-shadow:0 12px 40px rgba(255,105,180,.7) }

    @keyframes pulse{
      0%{ transform:scale(1) }
      50%{ transform:scale(1.06) }
      100%{ transform:scale(1) }
    }
    /* --- M√†n h√¨nh HAPPY BIRTHDAY (overlay) --- */
    #birthdayScreen{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background:linear-gradient(45deg,#ffdde1,#ee9ca7);
      z-index:50;
      overflow:hidden;
    }
    #lettersContainer{
      position:relative; /* reference cho v·ªã tr√≠ ch·ªØ */
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:center;
      font-weight:700;
      color:white;
      text-shadow:2px 2px 6px rgba(0,0,0,.25);
      font-size:6vmax; /* responsive */
      pointer-events:none;
    }
    .letter{
      display:inline-block;
      opacity:0;
      transform:translateY(-20px) scale(.95);
      transition:opacity .35s ease, transform .35s cubic-bezier(.2,.8,.2,1);
      will-change:transform,opacity;
    }
    .letter.show{
      opacity:1;
      transform:translateY(0) scale(1);
    }
    .letter.lift{
      transition: transform 2500ms linear, opacity 2500ms linear;
      transform: translateY(-150vh);
      opacity:0;
    }
    /* --- Bong b√≥ng ƒë·ªông (ƒë∆∞·ª£c th√™m b·∫±ng JS) --- */
    .balloon{
      position:absolute;
      width:38px;
      height:48px;
      border-radius:40px 40px 38px 38px;
      transform-origin:center bottom;
      box-shadow: 0 6px 14px rgba(0,0,0,.12);
      will-change: top, transform, opacity;
    }
    .balloon::after{
      content:"";
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      bottom:-12px;
      width:2px;
      height:14px;
      background:#111;
      opacity:.9;
    }
    .balloon.lift{
      animation:balloonLift 2400ms linear forwards;
    }
    @keyframes balloonLift{
      to { transform: translateY(-150vh); opacity:0; }
    }
    /* --- Responsive small --- */
    @media (max-width:420px){
      #startBtn{ font-size:1.1rem; padding:12px 18px }
      .popup-content{ padding:18px; max-width:320px }
    }
    #photoContainer {
  display: flex;
}
.selfPhoto {
  max-width: 220px;
  border-radius: 18px;
  box-shadow: 0 8px 30px rgba(0,0,0,.3);
  opacity: 0;
  transform: scale(0.9);
  animation: fadeInPhoto 1s ease forwards;
}
.selfPhoto:nth-child(2) { animation-delay: 0.2s; }
.selfPhoto:nth-child(3) { animation-delay: 0.4s; }

@keyframes fadeInPhoto {
  to {
    opacity: 1;
    transform: scale(1);
  }
}
.cake-container {
  position: relative; /* ƒë·ªÉ m≈©i t√™n ƒë·ªãnh v·ªã theo b√°nh */
  display: inline-block;
}
#arrowHint {
  position: absolute;
  left: -150px; /* kho·∫£ng c√°ch m≈©i t√™n t·ªõi b√°nh */
  top: 50%;
  transform: translateY(-50%);
  font-size: 150px; /* m≈©i t√™n b·ª± */
  color: #ff4081;
  animation: arrowWiggle 1s infinite;
  z-index: 5;
}
@keyframes arrowWiggle {
  0%   { transform: translate(-15px, -50%); }
  50%  { transform: translate(0px, -50%); }
  100% { transform: translate(-15px, -50%); }
}
  </style>
</head>
<body>
  <h1 id="mainTitle">üéÇ Ch√∫c M·ª´ng Sinh Nh·∫≠t üéâ</h1>
  <h1 id="mainTitle"> 26/09/2025 (18+) </h1>
  <br>
  <!-- B√°nh kem -->
  <div class="cake-container">
  <div id="arrowHint">‚û°</div>
  <img src="b√°nh.png" alt="B√°nh sinh nh·∫≠t" class="cake" id="cakeImg" onclick="openPopup()">
</div>
  <div id="photoContainer" style="display:none; margin:30px; text-align:center; gap:20px; flex-wrap:wrap; 
  justify-content:center;">
  <img src="1.jpg" class="selfPhoto" alt="·∫¢nh 1">
  <img src="2.jpg" class="selfPhoto" alt="·∫¢nh 2">
  <img src="3.jpg" class="selfPhoto" alt="·∫¢nh 3">
  <img src="4.jpg" class="selfPhoto" alt="·∫¢nh 4">
  <img src="5.jpg" class="selfPhoto" alt="·∫¢nh 5">
  <img src="6.jpg" class="selfPhoto" alt="·∫¢nh 6">
</div>
  <!-- Nh·∫°c n·ªÅn (autoplay muted ƒë·ªÉ tr√°nh ch·∫∑n; tr√¨nh duy·ªát s·∫Ω cho ph√©p b·∫≠t khi c√≥ t∆∞∆°ng t√°c) -->
  <audio id="bgMusic" autoplay loop muted>
    <source src="happy-birthday-357371.mp3" type="audio/mpeg">
  </audio>
  <!-- Popup 3 b∆∞·ªõc -->
  <div class="popup" id="popup">
    <div class="popup-content">
      <h2 id="message">üéâ H√¥m n√†y l√† sinh nh·∫≠t b·∫°n üéÇ</h2>
      <button id="popupBtn" class="popup-btn" onclick="moreMessage()">K·∫ø ti·∫øp ---></button>
    </div>
  </div>
  <!-- N√∫t n·ªïi b·∫≠t s·∫Ω hi·ªán sau khi ƒë√≥ng popup -->
  <button id="startBtn" onclick="startBirthday()">B·∫•m v√†o ƒë√¢y ƒëi</button>
  <!-- Overlay HAPPY BIRTHDAY -->
  <div id="birthdayScreen" aria-hidden="true">
    <div id="lettersContainer" aria-hidden="true"></div>
    <!-- balloons will be appended here by JS -->
  </div>
<script>
/* ======== QU·∫¢N L√ù NH·∫†C (b·∫≠t ti·∫øng khi ng∆∞·ªùi d√πng t∆∞∆°ng t√°c l·∫ßn ƒë·∫ßu) ======== */
document.body.addEventListener('click', function enableAudioOnce(){
  const m = document.getElementById('bgMusic');
  if (m) {
    m.muted = false;
    m.play().catch(()=>{/* ignore */});
  }
  document.body.removeEventListener('click', enableAudioOnce);
});
/* ======== POPUP 3 B∆Ø·ªöC ======== */
let step = 1;
function openPopup(){
  document.getElementById('arrowHint').style.display = 'none';

  document.getElementById('popup').style.display = 'flex';
}
function moreMessage(){
  const msg = document.getElementById('message');
  const btn = document.getElementById('popupBtn');
  if (step === 1){
    msg.innerHTML = "üíñ Ch√∫c b·∫°n m·ªôt ng√†y sinh nh·∫≠t th·∫≠t vui v·∫ª, h·ªçc gi·ªèi n√®, xinh ƒë·∫πp h∆°n n·ªØa üåü";
    step++;
  } else if (step === 2){
    msg.innerHTML = "üéÅ Tui hong bi·∫øt ch√∫c g√¨ n·ªØa h·∫øt tr∆°n, ch√∫c b·∫°n lu√¥n may m·∫Øn v√† th√†nh c√¥ng r·ª±c r·ª° trong t∆∞∆°ng lai nha üçÄ";
    step++;
  } else if (step === 3){
    msg.innerHTML = "üéÅ Ch√∫c b·∫°n t·∫•t c·∫£ tr·ª´ v·∫•t v·∫£ nha üçÄ";
    btn.textContent = "ƒê√≥ng";
    step++;
  }else {
    // ƒë√≥ng popup v√† hi·ªán n√∫t start
    document.getElementById('popup').style.display = 'none';
    document.getElementById('startBtn').style.display = 'inline-block';
    // reset
    msg.innerHTML = "üéâ Ch√∫c b·∫°n sinh nh·∫≠t th·∫≠t vui v·∫ª, h·∫°nh ph√∫c v√† tr√†n ƒë·∫ßy y√™u th∆∞∆°ng! üéÇ";
    btn.textContent = "C√≤n n·ªØa‚Ä¶";
    step = 1;
  }
}
/* ======== HI·ªÜU ·ª®NG HAPPY BIRTHDAY (xu·∫•t hi·ªán ch·ªØ -> bong b√≥ng ƒë√°p xu·ªëng t·ª´ng ch·ªØ -> k√©o l√™n) ======== */
function startBirthday(){
  const overlay = document.getElementById('birthdayScreen');
  const lettersContainer = document.getElementById('lettersContainer');
  const startBtn = document.getElementById('startBtn');
  // ·∫®n n√∫t
  startBtn.style.display = 'none';
  // Hi·ªán overlay
  overlay.style.display = 'flex';
  lettersContainer.innerHTML = '';
  const text = "HAPPY BIRTHDAY";
  const revealDelay = 80; // ms m·ªói k√≠ t·ª± hi·ªán
  const colors = ['#ff6666','#66ccff','#99ff99','#ffff66','#ff99ff','#ffcc66'];
  // T·∫°o spans cho t·ª´ng k√Ω t·ª± (bao g·ªìm kho·∫£ng tr·∫Øng)
  const spans = [];
  for (let ch of text){
    const sp = document.createElement('span');
    sp.className = 'letter';
    sp.textContent = ch === ' ' ? '\u00A0' : ch;
    lettersContainer.appendChild(sp);
    spans.push(sp);
  }
  // B·∫≠t hi·ªáu ·ª©ng xu·∫•t hi·ªán t·ª´ng ch·ªØ
  spans.forEach((sp, i) => {
    setTimeout(()=> sp.classList.add('show'), i * revealDelay);
  });
  // Khi ch·ªØ ƒë√£ hi·ªán h·∫øt -> b·∫Øt ƒë·∫ßu th·∫£ bong b√≥ng xu·ªëng t·ª´ng ch·ªØ
  const timeToAllShown = text.length * revealDelay + 300;
  setTimeout(()=> {
    // L·∫•y bounding rect c·ªßa overlay ƒë·ªÉ t√≠nh v·ªã tr√≠ t∆∞∆°ng ƒë·ªëi
    const overlayRect = overlay.getBoundingClientRect();
    // T·∫°o bong b√≥ng l·∫ßn l∆∞·ª£t cho m·ªói ch·ªØ (b·ªè space)
    const perBalloonDelay = 360; // ms gi·ªØa c√°c bong b√≥ng xu·∫•t hi·ªán
    const dropDuration = 600; // ms cho chuy·ªÉn ƒë·ªông ƒë√°p
    const pauseOnLetter = 420; // ms t·∫°m d·ª´ng tr∆∞·ªõc khi k√©o l√™n
    spans.forEach((sp, idx) => {
      const ch = text[idx];
      if (ch === ' ') return; // b·ªè kho·∫£ng tr·∫Øng
      setTimeout(()=> {
        // v·ªã tr√≠ ch·ªØ tr√™n overlay
        const letterRect = sp.getBoundingClientRect();
        const left = letterRect.left - overlayRect.left + letterRect.width/2 - 19; // 19 = balloon half-width
        // target top ƒë·ªÉ bong bay ch·∫°m s√°t ch·ªØ (balloon.height = 48)
        const targetTop = letterRect.top - overlayRect.top - 48 + 6; // h∆°i s√°t ch·ªØ
        // t·∫°o bong b√≥ng
        const b = document.createElement('div');
        b.className = 'balloon';
        b.style.left = left + 'px';
        b.style.top = '-80px'; // xu·∫•t ph√°t ph√≠a tr√™n
        b.style.background = colors[idx % colors.length];
        overlay.appendChild(b);
        // b·∫Øt force reflow tr∆∞·ªõc khi set top m·ªõi
        b.getBoundingClientRect();
        // ƒë√°p xu·ªëng
        b.style.transition = `top ${dropDuration}ms cubic-bezier(.2,.8,.2,1)`;
        b.style.top = targetTop + 'px';
        // Khi ƒë√£ ƒë√°p xu·ªëng, ch·ªù 1 ch√∫t r·ªìi k√©o l√™n c√πng ch·ªØ
        setTimeout(()=> {
          // k√©o ch·ªØ l√™n
          sp.classList.add('lift'); // letter chuy·ªÉn translateY(-150vh) + opacity 0
          // k√©o bong b√≥ng l√™n b·∫±ng animation class
          b.classList.add('lift');
          // x√≥a bong b√≥ng sau m·ªôt th·ªùi gian (sau lift k·∫øt th√∫c)
          setTimeout(()=> {
            b.remove();
          }, 2600); // tr√πng v·ªõi th·ªùi l∆∞·ª£ng lift animation
        }, dropDuration + pauseOnLetter);
      }, idx * perBalloonDelay);
    });
    // T·∫Øt overlay v√† reset sau khi m·ªçi th·ª© bay h·∫øt
    const lastIndex = text.replace(/ /g,'').length - 1;
    const totalTime = perBalloonDelay * text.length + dropDuration + pauseOnLetter + 2600 + 400;
setTimeout(()=> {
  overlay.style.display = 'none';
  lettersContainer.innerHTML = '';
  // Hi·ªán 3 ·∫£nh ·ªü d∆∞·ªõi
  const container = document.getElementById('photoContainer');
  if (container) {
    container.style.display = 'flex';
    container.querySelectorAll('.selfPhoto').forEach(img => {
      img.style.opacity = '0';
      img.style.transform = 'scale(0.9)';
      void img.offsetWidth;
      img.style.animation = '';
      setTimeout(()=>{
        img.style.animation = 'fadeInPhoto 1s ease forwards';
      }, 50);
    });
  }
}, totalTime);
  // ---- PH√ÅO HOA T·ª∞ ƒê·ªòNG ----
  let autoFireworksInterval;
  function autoFireworkBurst(){
    const overlayRect = overlay.getBoundingClientRect();
    const x = overlayRect.left + Math.random() * overlayRect.width;
    const y = overlayRect.top + Math.random() * overlayRect.height * 0.6; // kh√¥ng qu√° th·∫•p
    manualEmojiFirework(x, y);
  }
  autoFireworksInterval = setInterval(autoFireworkBurst, 500); // b·∫Øn m·ªói 0.5 gi√¢y
  // Ng·ª´ng ph√°o hoa khi hi·ªáu ·ª©ng k·∫øt th√∫c
  setTimeout(()=> clearInterval(autoFireworksInterval), totalTime - 1000);
  }, timeToAllShown);
}
</script>
<!-- ADDED: emoji firework button + manual firework script (no other code changed) -->
<div id="fireworkBtn" aria-label="B·∫Øn ph√°o hoa" title="B·∫Øn ph√°o hoa" style="position:fixed; top:10px; right:10px; font-size:32px; cursor:pointer; z-index:2147483647; user-select:none;">üéÜ</div>
<script>
/* Small self-contained manual emoji firework ‚Äî does NOT modify your existing variables/functions.
   It simply creates DOM particles (so it won't interfere with canvas-based fireworks you may have). */
(function(){
  const btn = document.getElementById('fireworkBtn');
  if (!btn) return;
  btn.addEventListener('click', function(e){
    // position the burst at the center of the emoji button
    const rect = btn.getBoundingClientRect();
    const x = rect.left + rect.width / 2;
    const y = rect.top + rect.height / 2;
    manualEmojiFirework(x, y);
  });
  function manualEmojiFirework(x, y) {
    const colors = ['#ff0','#f0f','#0ff','#fff','#f00','#0f0','#00f','#ff8c00','#ffd700'];
    for (let i = 0; i < 40; i++) {
      const el = document.createElement('div');
      document.body.appendChild(el);
      el.style.position = 'fixed';
      el.style.left = x + 'px';
      el.style.top = y + 'px';
      el.style.width = '7px';
      el.style.height = '7px';
      el.style.borderRadius = '50%';
      el.style.background = colors[Math.floor(Math.random() * colors.length)];
      el.style.zIndex = 2147483646;
      el.style.pointerEvents = 'none';
      const angle = Math.random() * Math.PI * 2;
      const speed = Math.random() * 6 + 2;
      let vx = Math.cos(angle) * speed;
      let vy = Math.sin(angle) * speed;
      let px = x;
      let py = y;
      let opacity = 1;
      const gravity = 0.06;
      (function animate() {
        px += vx;
        py += vy;
        vy += gravity;
        opacity -= 0.02;
        el.style.left = px + 'px';
        el.style.top = py + 'px';
        el.style.opacity = opacity;
        if (opacity > 0) {
          requestAnimationFrame(animate);
        } else {
          el.remove();
        }
      })();
    }
  }
})();
// ======== PH√ÅO HOA CHUNG ========
function manualEmojiFirework(x, y) {
  const colors = ['#ff0','#f0f','#0ff','#fff','#f00','#0f0','#00f','#ff8c00','#ffd700'];
  for (let i = 0; i < 40; i++) {
    const el = document.createElement('div');
    document.body.appendChild(el);
    el.style.position = 'fixed';
    el.style.left = x + 'px';
    el.style.top = y + 'px';
    el.style.width = '7px';
    el.style.height = '7px';
    el.style.borderRadius = '50%';
    el.style.background = colors[Math.floor(Math.random() * colors.length)];
    el.style.zIndex = 2147483646;
    el.style.pointerEvents = 'none';
    const angle = Math.random() * Math.PI * 2;
    const speed = Math.random() * 6 + 2;
    let vx = Math.cos(angle) * speed;
    let vy = Math.sin(angle) * speed;
    let px = x;
    let py = y;
    let opacity = 1;
    const gravity = 0.06;
    (function animate() {
      px += vx;
      py += vy;
      vy += gravity;
      opacity -= 0.02;
      el.style.left = px + 'px';
      el.style.top = py + 'px';
      el.style.opacity = opacity;
      if (opacity > 0) {
        requestAnimationFrame(animate);
      } else {
        el.remove();
      }
    })();
  }
}
// ======== N√öT PH√ÅO HOA TH·ª¶ C√îNG ========
(function(){
  const btn = document.getElementById('fireworkBtn');
  if (!btn) return;
  btn.addEventListener('click', function(){
    const rect = btn.getBoundingClientRect();
    const x = rect.left + rect.width / 2;
    const y = rect.top + rect.height / 2;
    manualEmojiFirework(x, y);
  });
})();
// ·∫®n to√†n b·ªô sau khi hi·ªáu ·ª©ng cu·ªëi xong + 5 gi√¢y v√† hi·ªán popup ƒë·∫ßu ti√™n
document.addEventListener("DOMContentLoaded", function () {
  const overlay = document.getElementById("birthdayScreen");

  function createPopup(message, onStop, onContinue) {
    const popup = document.createElement("div");
    popup.style.position = "fixed";
    popup.style.inset = "0";
    popup.style.background = "rgba(0,0,0,0.8)";
    popup.style.display = "flex";
    popup.style.flexDirection = "column";
    popup.style.alignItems = "center";
    popup.style.justifyContent = "center";
    popup.style.color = "white";
    popup.style.fontSize = "2em";
    popup.style.zIndex = "9999";
    popup.style.opacity = "0";
    popup.style.transition = "opacity 0.5s ease";
    // N·ªôi dung
    const msgEl = document.createElement("div");
    msgEl.innerHTML = message;
    msgEl.style.marginBottom = "20px";
    popup.appendChild(msgEl);
    // N√∫t container
    const btnContainer = document.createElement("div");
    btnContainer.style.display = "flex";
    btnContainer.style.gap = "15px";
    // N√∫t D·ª´ng l·∫°i
    const stopBtn = document.createElement("button");
    stopBtn.textContent = "‚è∏ D·ª´ng l·∫°i";
    stopBtn.style.padding = "10px 20px";
    stopBtn.style.fontSize = "1rem";
    stopBtn.style.cursor = "pointer";
    stopBtn.onclick = () => fadeOut(popup, () => {
      if (onStop) onStop();
    });
    // N√∫t Ti·∫øp t·ª•c
const continueBtn = document.createElement("button");
continueBtn.textContent = "‚ñ∂ Ti·∫øp t·ª•c";
continueBtn.style.padding = "10px 20px";
continueBtn.style.fontSize = "1rem";
continueBtn.style.cursor = "pointer";
continueBtn.onclick = () => fadeOut(popup, () => {
  startCountdown(() => {
    dropLettersEffect(
      "Th·∫£o, nh√¢n ti·ªán ƒë√¢y th√¨ cho t n√≥i v√†i l·ªùi:\n th·∫≠t ra th√¨ t c√≤n th√≠ch m, n·∫øu nh∆∞ m ch∆∞a ƒë·ªÉ √Ω ai th√¨ cho t th√™m 1\n c∆° h·ªôi nha, th√¥i k·∫øt th√∫c ·ªü ƒë√¢y nha",
      () => { 
        // 1Ô∏è‚É£ Khai b√°o nh·∫°c
        const oldMusic = document.getElementById("bgMusic"); // n·∫øu nh·∫°c c≈© ƒëang ch·∫°y qua <audio id="bgMusic">
        const newMusic = new Audio("N∆°i n√†y c√≥ anh.mp3"); // file nh·∫°c m·ªõi
        newMusic.volume = 1;
        newMusic.loop = true;

        // 2Ô∏è‚É£ Ph√°t nh·∫°c ph√°o n·ªï 10 l·∫ßn v·ªõi kho·∫£ng c√°ch ng·∫Øn
        let fireworkCount = 0;
        const fireworkSound = new Audio("boom-356126.mp3");
        fireworkSound.volume = 1; // t·ªëi ƒëa

        function playFirework() {
          // Khi n·ªï l·∫ßn ƒë·∫ßu -> t·∫Øt nh·∫°c c≈©, ph√°t nh·∫°c m·ªõi
          if (fireworkCount === 0) {
            if (oldMusic) {
              oldMusic.pause();
              oldMusic.currentTime = 0;
            }
            newMusic.currentTime = 0;
            newMusic.play();
          }

          fireworkSound.currentTime = 0;
          fireworkSound.play();
          fireworkCount++;
          if (fireworkCount < 10) {
            setTimeout(playFirework, 800); // 0.8 gi√¢y
          }
        }

        playFirework();

        // ‚¨á Th√™m ch·ªØ + ph√°o b·∫Øn ngay
        const message = document.createElement("div");
        message.innerText = "üéâ T c·∫£m ∆°n m v√¨ ƒë√£ cho t c∆° h·ªôi l·∫ßn n·ªØa\n t y√™u m √† kh√¥ng\n ANH Y√äU EM üéâ";
        Object.assign(message.style, {
          position: "fixed",
          top: "50%",
          left: "50%",
          transform: "translate(-50%, -50%)",
          fontSize: "2rem",
          color: "yellow",
          fontWeight: "bold",
          textAlign: "center",
          zIndex: 9999,
          textShadow: "2px 2px 8px black",
        });
        document.body.appendChild(message);

        const start = Date.now();
        const fireworkInterval = setInterval(() => {
          if (Date.now() - start >= 10000) {
            clearInterval(fireworkInterval);
            message.remove();
            return;
          }
          const x = window.innerWidth * Math.random();
          const y = window.innerHeight * Math.random() * 0.6;
          manualEmojiFirework(x, y, true);
        }, 300);
      },
      () => { 
        alert("Huy chu·∫©n b·ªã kh√≥c r·ªìi ƒë√≥ b·∫°n üò¢"); 
      }
    );
  });
});


    btnContainer.appendChild(stopBtn);
    btnContainer.appendChild(continueBtn);
    popup.appendChild(btnContainer);
    document.body.appendChild(popup);
    // Fade-in
    requestAnimationFrame(() => {
      popup.style.opacity = "1";
    });
    return popup;
  }
  function fadeOut(popup, callback) {
    popup.style.opacity = "0";
    setTimeout(() => {
      popup.remove();
      if (callback) callback();
    }, 500); // kh·ªõp v·ªõi th·ªùi gian transition
  }
  function showPopup(message, onStop, onContinue) {
    createPopup(message, onStop, onContinue);
  }
  const observer = new MutationObserver(() => {
    if (overlay.style.display === "none") {
      setTimeout(() => {
        // ·∫®n to√†n b·ªô n·ªôi dung c≈©
        document.querySelectorAll("body > *").forEach(el => {
          el.style.display = "none";
        });
        // Popup 1
        showPopup(
          "üéâ B·∫•t ng·ªù ti·∫øp theo ƒë√¢y! üéÅ",
          // Khi ·∫•n D·ª´ng l·∫°i
          () => {
            showPopup("üôè C·∫¢M ∆†N ƒê√É THEO D√ïI ‚ù§Ô∏è");
          },
        );
      }, 5000); // 5 gi√¢y sau khi k·∫øt th√∫c hi·ªáu ·ª©ng
      observer.disconnect();
    }
  });
  function startCountdown(callback) {
  const countdownEl = document.createElement("div");
  countdownEl.style.position = "fixed";
  countdownEl.style.inset = "0";
  countdownEl.style.display = "flex";
  countdownEl.style.alignItems = "center";
  countdownEl.style.justifyContent = "center";
  countdownEl.style.background = "rgba(0,0,0,0.85)";
  countdownEl.style.color = "white";
  countdownEl.style.fontSize = "5em";
  countdownEl.style.zIndex = "10000";
  countdownEl.style.fontWeight = "bold";
  countdownEl.style.opacity = "0";
  countdownEl.style.transition = "opacity 0.4s ease";
  document.body.appendChild(countdownEl);
  let count = 3;
  function showNumber() {
    countdownEl.textContent = count;
    countdownEl.style.opacity = "1";
    setTimeout(() => {
      countdownEl.style.opacity = "0";
      setTimeout(() => {
        count--;
        if (count > 0) {
          showNumber();
        } else {
          countdownEl.remove();
          if (callback) callback();
        }
      }, 400);
    }, 600);
  }
  showNumber();
}
  function dropLettersEffect(text, onAccept, onDecline) {
  const container = document.createElement("div");
  container.style.position = "fixed";
  container.style.inset = "0";
  container.style.display = "flex";
  container.style.flexDirection = "column";
  container.style.alignItems = "center";
  container.style.justifyContent = "center";
  container.style.fontSize = "3em";
  container.style.fontWeight = "bold";
  container.style.color = "#fff";
  container.style.background = "rgba(0,0,0,0.85)";
  container.style.zIndex = "10000";
  container.style.padding = "20px";
  container.style.textAlign = "center";
  document.body.appendChild(container);
  const textWrapper = document.createElement("div");
  container.appendChild(textWrapper);
  const lines = text.split("\n"); // t√°ch d√≤ng
  let delayCounter = 0;
  lines.forEach((line) => {
    const lineDiv = document.createElement("div");
    textWrapper.appendChild(lineDiv);
    line.split("").forEach((ch) => {
      const span = document.createElement("span");
      span.textContent = ch === " " ? "\u00A0" : ch;
      span.style.display = "inline-block";
      span.style.transform = "translateY(-200px)";
      span.style.opacity = "0";
      span.style.transition = "transform 0.6s ease, opacity 0.6s ease";
      lineDiv.appendChild(span);
      setTimeout(() => {
        span.style.transform = "translateY(0)";
        span.style.opacity = "1";
      }, delayCounter * 100);
      delayCounter++;
    });
    delayCounter += 3; // th√™m kho·∫£ng d·ª´ng gi·ªØa c√°c d√≤ng
  });
  // Sau khi r·ªõt ch·ªØ xong ‚Üí hi·ªán n√∫t
  setTimeout(() => {
    const btnContainer = document.createElement("div");
    btnContainer.style.marginTop = "40px";
    btnContainer.style.display = "flex";
    btnContainer.style.gap = "20px";
    const declineBtn = document.createElement("button");
    declineBtn.textContent = "‚ùå T·ª´ ch·ªëi";
    declineBtn.style.padding = "12px 24px";
    declineBtn.style.fontSize = "1rem";
    declineBtn.style.cursor = "pointer";
    declineBtn.onclick = () => {
      container.remove();
      if (onDecline) onDecline();
    };
    const acceptBtn = document.createElement("button");
    acceptBtn.textContent = "‚úÖ ƒê·ªìng √Ω";
    acceptBtn.style.padding = "12px 24px";
    acceptBtn.style.fontSize = "1rem";
    acceptBtn.style.cursor = "pointer";
    acceptBtn.onclick = () => {
      container.remove();
      if (onAccept) onAccept();
    };
    btnContainer.appendChild(declineBtn);
    btnContainer.appendChild(acceptBtn);
    container.appendChild(btnContainer);
  }, delayCounter * 100 + 500); // hi·ªán n√∫t sau khi r·ªõt h·∫øt ch·ªØ
}
  observer.observe(overlay, { attributes: true, attributeFilter: ["style"] });
});
function dropLettersEffect(text) {
  const container = document.createElement("div");
  container.style.position = "fixed";
  container.style.inset = "0";
  container.style.background = "rgba(0,0,0,0.85)";
  container.style.display = "flex";
  container.style.alignItems = "flex-start";
  container.style.justifyContent = "center";
  container.style.overflow = "hidden";
  container.style.zIndex = "10000";
  document.body.appendChild(container);

  const letters = text.split("");
  letters.forEach((char, i) => {
    const span = document.createElement("span");
    span.textContent = char;
    span.style.position = "relative";
    span.style.fontSize = "4em";
    span.style.color = "#fff";
    span.style.opacity = "0";
    span.style.top = "-100px";
    span.style.transition = "top 0.6s ease, opacity 0.6s ease";
    span.style.transitionDelay = `${i * 0.15}s`;
    container.appendChild(span);
  });

  // Trigger animation
  setTimeout(() => {
    [...container.children].forEach(span => {
      span.style.opacity = "1";
      span.style.top = "100px";
    });
  }, 50);

  // T·ª± ·∫©n sau 3 gi√¢y
  setTimeout(() => {
    container.style.transition = "opacity 0.5s ease";
    container.style.opacity = "0";
    setTimeout(() => container.remove(), 500);
  }, 3000 + letters.length * 150);
}

</script>

</body>
</html>